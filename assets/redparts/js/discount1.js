IB.views.EMIView=IB.views.BaseView.extend({template:_.template($('#ah-emi-tmpl').html()),initialize:function(){this.showOptions=false;this.minEmiAvail={};this.isEmiAvail=false;this.defaultSalePrice=this.emiSalePrice;this.calculateEmi();},calculateEmi:function(){if(!this.emiAmount)return;var that=this;$.ajax({global:false,url:'/calculate-emi/',type:'GET',data:{amount:this.emiAmount,},success:function(result){that.handleResult(result);},error:function(error){console.error(error);}});},events:{'click .ah-show-emi-options-btn':'showEMIOptions','click .ah-close-emi-options-btn':'hideEMIOptions','change .ah-emi-banks':'changeEMIBank',},serialize:function(){return{banks:this.banks,isEmiAvail:this.isEmiAvail,minEMI:this.minEMI,minEMIAvail:this.minEmiAvail,defaultSalePrice:this.defaultSalePrice,selectedBank:this.selectedBank,showOptions:this.showOptions};},afterRender:function(){if(this.showOptions){this.$('.ah-emi-popup').removeClass('hide');}
if(this.isEmiAvail){$(".creditAvilableArea").removeClass('hide')}},checkEmiAvail:function(){if(this.minEmiAvail.min_amount>this.emiAmount){this.minEMI=null;this.isEmiAvail=false;}else{this.isEmiAvail=true;}
this.render();},handleResult:function(result){this.minEmiAvail=_.find(result.banks,function(bank){return _.min(bank.min_amount);});this.banks=_.filter(result.banks,function(bank){return!_.isEmpty(bank.tenures);});var tenures=_.flatten(_.pluck(this.banks,'tenures'));if(!_.isEmpty(tenures)){this.minEMI=_.min(tenures,function(t){return t.monthly_installment;});}
if(this.minEMI){this.selectedBank=_.find(this.banks,function(bank){var minTenure=_.min(bank.tenures,function(t){return t.monthly_installment;});return _.isEqual(minTenure,this.minEMI);},this);}
if(!this.selectedBank&&_.isEmpty(this.banks)){this.selectedBank=this.minEmiAvail;}
this.checkEmiAvail();return this;},changeEMIBank:function(e){var bankCode=$(e.currentTarget).val();this.selectedBank=_.find(this.banks,function(bank){return bank.bank_code==bankCode;});this.render();},showEMIOptions:function(){this.calculateEmi();this.showOptions=true;},hideEMIOptions:function(){this.showOptions=false;this.render();}});"use strict";function addToQuotation(e){e.preventDefault();var sku=$(e.target).attr("data-sku");var qty=$(".AH_QtyBox").val();var img_pre=$(e.target).attr('data-imgPrefix');var data={'action':'add','sku':sku,'qty':parseInt(qty),'csrfmiddlewaretoken':getCookie('csrftoken')};AJAX_POST_HTML_WITH_DATA_ON_SUCCESS('/quotation/quotation/',data,'',function(result){var html=$('#AH_QuotationSuccessTmpl').html()
$('body').append(html);new IB.views.QuotationSuccessView({el:'.AH_QuotationSuccessView',quoteItem:result}).render();});}
IB.views.QuotationSuccessView=IB.views.BaseView.extend({template:_.template($('#AH_QuotationSuccessTmpl').html()),initialize:function(){},events:{'click .AH_Close':'close'},close:function(){this.remove();this.removeView();},serialize:function(){return{quoteItem:JSON.parse(this.quoteItem)}}});IB.views.OffersListView=IB.views.BaseView.extend({events:{'click .AH_TermsAndConditionsBtn':'showTermsAndConditions','click .AH_CloseTermsAndContions':'closeTermsAndConditions'},showTermsAndConditions:function(){this.$('.AH_OfferDetail').hide();this.$('.AH_TermsAndConditions').show();},closeTermsAndConditions:function(){this.$('.AH_TermsAndConditions').hide();this.$('.AH_OfferDetail').show();}});IB.views.OffersSidebarView=IB.views.BaseView.extend({initialize:function(){$('body').css({'overflow':'hidden'});this.$el.show();_.each(this.$('.AH_OffersList'),function($elem){this.insertView(new IB.views.OffersListView({el:$elem}));},this);},events:{'click .crossIcon':'closeSidebar'},closeSidebar:function(){$('body').css({'overflow':'auto'});this.removeView();this.remove();},});IB.views.OffersBtnView=IB.views.BaseView.extend({initialize:function(){this.offers=[];$.ajax({url:'/promo/active-list/'+IB.globals.sku+'/',type:'GET',success:function(res){if(res.length>=1){$('#AH_offerSection').show();if(!res[0].coupon_code){$('.AH_UseCode').text("Auto Applied");}
$(".couponHeading").text(res[0].coupon_code);if(res[0].description.toLowerCase().includes("Flat")&&res[0].description.toLowerCase().includes("%")){var offIndex=res[0].description.toLowerCase().indexOf("off");$(".discountHeading ").prepend(res[0].description.substring(0,offIndex+3));$(".minOrderValue ").prepend(res[0].description.substring(offIndex+3));}else{$(".discountHeading ").prepend(res[0].description);}}}})},events:{'click':'showOffersSideBar'},serialize:function(){return{offers:this.offers};},showOffersSideBar:function(e){if(e.preventDefault){e.preventDefault();}
var that=this;$.ajax({url:'/promo/active-list/'+IB.globals.sku,type:'GET',success:function(res){that.offers=res;$('body').append(_.template($('#AH_OffersSideBarTmpl').html())(that.serialize()));IB.globals.views.offersSidebarView=new IB.views.OffersSidebarView({el:'#AH_OffersSidebar'});}});}});IB.views.CodCheck=IB.views.BaseView.extend({initialize:function(){var qtyElem=$("#qty_"+IB.globals.src_id);var qtyVal=parseInt(qtyElem.val())||IB.globals.minQty;var data={'pincode':this.$('.AH_CodPincode').val(),'sku':this.$('.AH_CodPincode').attr('data-sku'),'qty':qtyVal};var stock_status=$('.AH_StockStatus').text();if(IB.globals.product_is_buyable){this.checkPincode(data);}},events:{'click .AH_CheckBtn':'checkCOD','click .AH_ChangePinCode':'changePincode','click .AH_shipping_faq_button':'showShippingFaq','click .AH_close_shipping_faq':'hideShippingFaq'},showShippingFaq:function(){this.$('.AH_shipping_faq_container').removeClass('hide');},hideShippingFaq:function(){this.$('.AH_shipping_faq_container').addClass('hide');},checkCOD:function(evt){evt.preventDefault();var pincode=this.$('.AH_CodPincode').val();var pinCodeRegex=/^[1-9][0-9]{5}$/;if(!pinCodeRegex.test(pincode)){this.$('.AH_PincodeError').text('Please enter a valid Pincode.');this.$('.AH_PincodeError').show();return false;}
this.$('.AH_PincodeError').hide();var sku=this.$('.AH_CodPincode').attr('data-sku');var qtyElem=$("#qty_"+IB.globals.src_id);var qtyVal=parseInt(qtyElem.val())||IB.globals.minQty;var data={'pincode':pincode,'sku':sku,'qty':qtyVal};var stock_status=$('.AH_StockStatus').text();if(stock_status.toLowerCase()!=='inactive'){this.checkPincode(data);}},checkPincode:function(data){var self=this;if(!data.pincode){return}
var that=this;if(IB.GA){ga("send","pageview","/serviceability-pdp/check/");}
$.ajax({type:'GET',url:'/shipment/check_availability/',dataType:'json',data:data,success:function(result){if(result.freight_charge&&(result.is_cod_available||result.is_prepaid_available)){that.$('.AH_shipping_faq').removeClass('hide');that.$('.AH_DeliveryCharges').text('Shipping Charges:');if(result.freight_charge>result.freight_max){that.$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_max);}
else{that.$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_charge);}
that.$('.AH_MaxDeliveryCharges').html('<span class="freeShippingText">Free shipping</span> on buying '+result.free_shipping_qty+'+ quantities');that.$('.AH_DeliveryFreeLabel').addClass('hide');}
else{that.$('.AH_shipping_faq').addClass('hide');that.$('.AH_DeliveryCharges').text('');that.$('.AH_DeliveryProductLabel').text('');that.$('.AH_MaxDeliveryCharges').text('');if(result.freight_charge===0){that.$('.AH_DeliveryCharges').text('Shipping Charges: ');that.$('.AH_DeliveryProductLabel').text('FREE');that.$('.AH_DeliveryFreeLabel').removeClass('hide');}
else{that.$('.AH_DeliveryFreeLabel').addClass('hide');}}
if(result.pincode&&result.pincode_obj){$('.serviceabilityArea').find('.heading').hide()
$('.serviceabilityArea').find('.pincodeArea').hide()
that.$('.AH_PincodeError').hide();that.$('.AH_PincodeDetails').show();IB.globals.ishyperlocal=result.hyperlocal_availability?true:false;if(!result.hyperlocal_availability&&IB.globals.checkHyperLocal=="hyperlocal"){$(".AH_NotServiceable").show().addClass('not-available')
$(".AH_BuyNowBtn,.addToCart").attr("disabled",true).addClass("disable");$(".AH_BuyNowBtn, .addToCart").off('click');}else if(result.is_cod_available||result.is_prepaid_available){$(".AH_BuyNowBtn, .addToCart").attr("disabled",false).removeClass("disable");$(".AH_BuyNowBtn, .addToCart").off('click');$(".AH_BuyNowBtn").on('click',buyNowHandler);$(".addToCart").on('click',addToCartHandler);that.$('.AH_Serviceable').show();that.$('.AH_NotServiceable').hide()
if(result.is_cod_available){that.$('.AH_prepaid_msg').hide();}else{that.$('.AH_prepaid_msg').show();}
if(IB.GA){ga("send","pageview","/serviceability-pdp/success/");}}else if((!result.is_cod_available)&&(!result.is_prepaid_available)){$(".AH_NotServiceable").show().addClass('not-available');$(".AH_BuyNowBtn,.addToCart").attr("disabled",true).addClass("disable");$(".AH_BuyNowBtn, .addToCart").off('click');}else{$(".AH_BuyNowBtn, .addToCart").attr("disabled",false).removeClass("disable");$(".AH_BuyNowBtn, .addToCart").off('click');$(".AH_BuyNowBtn").on('click',buyNowHandler);$(".addToCart").on('click',addToCartHandler);that.$('.AH_NotServiceable').show();that.$('.AH_Serviceable').hide();if(IB.GA){ga("send","pageview","/serviceability-pdp/fail/");}}
if(!_.isEmpty(result.pincode_obj.taluk)){if(result.pincode_obj.taluk!=="NA"){var pin_val=result.pincode_obj.pincode+' - '+result.pincode_obj.taluk;that.$('.AH_pincode').text(''+pin_val);}else{that.$('.AH_pincode').text(''+result.pincode);}}else{that.$('.AH_pincode').text(''+result.pincode);}}else if(result.pincode&&!result.pincode_obj){that.$('.AH_NotServiceable','.AH_Serviceable').hide();that.$('.AH_PincodeError').show();that.$('.AH_PincodeError').text(result.error);if(IB.GA){ga("send","pageview","/serviceability-pdp/invalid/");}}else if(result.pincode===""&&!result.pincode_obj){if(result.is_cod_available||result.is_prepaid_available){that.$('.AH_Serviceable').show();that.$('.AH_PincodeDetails').hide();if(result.is_cod_available){that.$('.AH_prepaid_msg').hide();}else{that.$('.AH_prepaid_msg').show();}}}},error:function(err){that.$('.AH_PincodeError').text('Try Again');}});},changePincode:function(e){e.preventDefault();this.$('.AH_NotServiceable').hide();this.$('.AH_Serviceable').hide();this.$('.AH_CheckPincode').show();$('.serviceabilityArea').find('.heading').show()
$('.serviceabilityArea').find('.pincodeArea').show()
this.$('.AH_CodPincode').focus();},});IB.views.DownloadCatalogBtnView=IB.views.BaseView.extend({events:{'click':'downloadCatalog_Handler'},downloadCatalog_Handler:function(){this.initCatalogDialog();if(IB.globals.is_authenticated||IB.globals.catalogDownloadLead){IB.functions.addCatalogDownloadLead(this.getUserEmail(),this.getUserPhone());IB.functions.downloadCatalog(IB.globals.downloadCatalogLink);}else{$("#downloadCataModal").modal('show');}},initCatalogDialog:function(){var title='Please tell us your contact information to download the catalog. We only need this once.'
var ht=$('#downloadCatalogTmpl').html();var body_content=ht;$("#downloadCataModal .modal-body").html(body_content);$("#downloadCataModal .modal-title").html(title);$("#downloadCataModal").modal({backdrop:true,show:false});var that=this;$("#downloadCataModal").on('shown.bs.modal',function(){that.insertView(new IB.views.DownloadCatalogDialogView({el:$(this)}));});return this;},getUserEmail:function(){if(IB.globals.is_authenticated){return IB.globals.auth_user_email;}else if(IB.globals.catalogDownloadLead){return IB.globals.catalogDownloadLead.email_id;}else{return'';}},getUserPhone:function(){return IB.globals.catalogDownloadLead?IB.globals.catalogDownloadLead.phone_number:'';}});_.extend(Backbone.Model.prototype,Backbone.Validation.mixin);IB.models.DownloadCatalog=Backbone.Model.extend({validation:{email_id:[{required:true,msg:"Please enter your email id"},{pattern:'email',msg:"Please enter correct email"}],phone_no:[{required:true,msg:"Please enter your mobile number"},{pattern:/^\d{10,12}$/,msg:"Invalid phone number"}],}});IB.views.DownloadCatalogDialogView=IB.views.BaseView.extend({model:new IB.models.DownloadCatalog(),events:{'submit':'downloadCatalog','input input':function(){this.$('.AH_Email_Error').text("").hide();this.$('.AH_Phone_Error').text("").hide();},'input #phone_no':function(e){var val=$(e.currentTarget).val()||'';var lastChar=val.slice(val.length-1,val.length);var nameRegex=/^[0-9]$/;if(!nameRegex.test(lastChar)){$(e.currentTarget).val(val.slice(0,val.length-1));}}},downloadCatalog:function(e){e.preventDefault();var email=this.$('#email_id').val();var phone=this.$('#phone_no').val();this.model.set('email_id',email);this.model.set('phone_no',phone);var errors=this.model.validate();if(!_.isEmpty(errors)){this.$('.AH_Email_Error').text(errors['email_id']).show();this.$('.AH_Phone_Error').text(errors['phone_no']).show();return;}
IB.functions.addCatalogDownloadLead(email,phone);IB.functions.downloadCatalog(IB.globals.downloadCatalogLink);},});IB.models.DefaultPriceInfo=Backbone.Model.extend({defaults:{listPrice:IB.globals.listPrice,salePrice:IB.globals.salePrice,taxPerPiece:IB.globals.taxPerPiece,discount:IB.globals.discount,pricePerPiece:IB.globals.pricePerPiece,minQty:IB.globals.minQty}});IB.models.BulkPriceInfo=Backbone.Model.extend({});IB.views.BulkPriceView=IB.views.BaseView.extend({events:{'click .AH_BulkPriceOption':'applyBulkPrice','click .AH_ClearSelection':'clearBulkPricing'},applyBulkPrice:function(e){this.$('.AH_BulkPriceOption').removeClass('active');$(e.currentTarget).addClass('active');var qty=e.currentTarget.dataset.minQty;updatePrice(qty);IB.isBulkSelected=true;var pincode=$('.AH_CodPincode').val();var sku=$('.AH_CodPincode').attr('data-sku');if(pincode){var data={'pincode':pincode,'sku':sku,'qty':qty};$.ajax({type:'GET',url:'/shipment/check_availability/',dataType:'json',data:data,success:function(result){if(result.freight_charge&&(result.is_cod_available||result.is_prepaid_available)){$('.AH_shipping_faq').removeClass('hide');$('.AH_DeliveryCharges').text('Shipping Charges:');if(result.freight_charge>result.freight_max){$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_max);}
else{$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_charge);}
$('.AH_MaxDeliveryCharges').html('<span class="freeShippingText">Free shipping</span> on buying '+result.free_shipping_qty+'+ quantities');$('.AH_DeliveryFreeLabel').addClass('hide');}
else{$('.AH_shipping_faq').addClass('hide');$('.AH_DeliveryCharges').text('');$('.AH_DeliveryProductLabel').text('');$('.AH_MaxDeliveryCharges').text('');if(result.freight_charge===0){$('.AH_DeliveryCharges').text('Shipping Charges');$('.AH_DeliveryProductLabel').text('FREE');$('.AH_DeliveryFreeLabel').removeClass('hide');}
else{$('.AH_DeliveryFreeLabel').addClass('hide');}}},error:function(err){that.$('.AH_PincodeError').text('Try Again');}});}},clearBulkPricing:function(){IB.isBulkSelected=false;updatePrice(IB.models.defaultPriceInfo.get('minQty'));}});IB.views.RECENTLY_VIEWEDView=IB.views.BaseView.extend({initialize:function(){},events:{'click .AH_oosProductWidgetItem':'oosProductWidgetItemClick','click .AH_leftArrow':'moveLeft','click .AH_rightArrow':'moveRight','click .AH_AddToCart':'addToCart','click .AH_SeeMore':'seeMore'},oosProductWidgetItemClick:function(e){if(IB.GA){if(IB.globals.oos){ga("send","event","oos_rail","Click","oos_rail");}else if(!IB.globals.isActive){ga("send","event","inactive_rail","Click","inactive_rail");}}},getRecentlyViewed:function(){var that=this;$.ajax({url:"/web/similar_products/"+IB.globals.sku,type:'GET',beforeSend:function(){$("#ajaxBusy").hide();},success:function(result){if(result.length>0){that.similarProducts=result;that.similarProducts.map(function(item){item.imageUrl=item.imageUrl?item.imageUrl:'/static/images/image_not_available.jpg';return item;});that.render();that.heading='cav';}}});},getBoughtTogether:function(){var that=this;$.ajax({url:"/web/bought-together/"+IB.globals.sku,type:'GET',beforeSend:function(){$("#ajaxBusy").hide();},success:function(result){if(result.length>0){that.similarProducts=result;that.render();that.heading='fbt';if(result.length>3){}}}});},getoosRecommendations:function(){var that=this;$.ajax({url:"/web/similar_products/"+IB.globals.sku,type:'GET',beforeSend:function(){$("#ajaxBusy").hide();},success:function(result){if(result.length>0){that.similarProducts=result;that.render();}}});},getCompatibleProducts:function(){var that=this;$.ajax({url:"/compatible-products/"+IB.globals.sku,type:'GET',beforeSend:function(){$("#ajaxBusy").hide();},success:function(result){if(result.length>0){$('.AH_CompatibleLink').show();that.similarProducts=result;that.render();}}});},afterRender:function(){if($('#CAVCarousel')){$('#CAVCarousel').carousel({interval:false});}
if($('#FBTCarousel')){$('#FBTCarousel').carousel({interval:false});}
$('.carousel .item').each(function(){var next=$(this).next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));for(var i=0;i<2;i++){next=next.next();if(!next.length){next=$(this).siblings(':first');}
next.children(':first-child').clone().appendTo($(this));}});},moveLeft:function(){var that=this;var slideCount=this.$('.AH_Cards .viewedslide').length;var slideWidth=this.$('.AH_Cards .viewedslide').width();var sliderWidth=(slideCount*slideWidth)+slideWidth;var slideWidth=this.$('.AH_Cards .viewedslide').width();this.$('.AH_Cards').animate({left:+slideWidth},200,function(){that.$('.AH_Cards .viewedslide:last').prependTo(that.$('.AH_Cards'));that.$('.AH_Cards').css('left','');});},moveRight:function(){var that=this;var slideCount=this.$('.AH_Cards .viewedslide').length;var slideWidth=this.$('.AH_Cards .viewedslide').width();var sliderWidth=(slideCount*slideWidth)+slideWidth;var slideWidth=this.$('.AH_Cards .viewedslide').width();this.$('.AH_Cards').animate({left:-slideWidth},200,function(){that.$('.AH_Cards .viewedslide:first').appendTo(that.$('.AH_Cards'));that.$('.AH_Cards').css('left','');});},addToCart:function(e){var sku=$(e.currentTarget).data('sku');addToCart(sku,1);$("html, body").animate({scrollTop:0},1000);},seeMore:function(){var tmpl=$('#AH_CompatibleProductsPopUpTmpl').html();$('body').append('<div class="AH_MoreCompatibleProductsView"></div>');new IB.views.CompatibleProductsView({el:'.AH_MoreCompatibleProductsView',currentProduct:IB.globals.product,compatibleProducts:this.similarProducts});},serialize:function(){return{object:this.similarProducts,heading:this.heading};}});IB.views.CompatibleProductsView=IB.views.BaseView.extend({template:_.template($("#AH_CompatibleProductsPopUpTmpl").html()),events:{'click .AH_ClosePopUp':'closePopup','click .AH_AddToCart':'addToCart','click .AH_BG_Overlay':'closePopup','click .AH_AlertClose':'closeAlert'},initialize:function(){$('body').css('overflow','hidden');this.render();},serialize:function(){return{compatibleProducts:this.compatibleProducts,currentProduct:this.currentProduct};},addToCart:function(e){var minQty=1;var sku=$(e.currentTarget).data('sku');var data={'action':'add','sku':sku,'qty':parseInt(minQty),'csrfmiddlewaretoken':getCookie('csrftoken')};if(IB.GA&&location.pathname!="/"){if(window.location.pathname.indexOf('/search/')!=-1){ga("send","event","Search_pages","Click","Add_to_Cart_button");}else{ga("send","event","Leaf_pages","Click","Add_to_Cart_button");}}
if(IB.GA&&IB.isBulkSelected){ga("send","event","product_page","Click","Bulk_add_to_Cart");IB.isBulkSelected=false;}
AJAX_POST_HTML_WITH_DATA_ON_SUCCESS('/order/',data,'cartBox',function(result){location.pathname!="/"&&ga_send_cart_open();$('.add-to-cart-alert').show();var cartData=$.parseJSON(result);if(cartData.item_counts){$('.AH_HeaderCartCount').removeClass('hide');$('.AH_HeaderCartCount').html(parseInt(cartData.item_counts));}
setTimeout(function(){$('.add-to-cart-alert').hide();},5000);});},closeAlert:function(){$('.add-to-cart-alert').hide();},closePopup:function(){$('body').css('overflow','auto');this.removeView();this.remove();}});function getPriceDetails(qty){IB.models.bulkInfo=new IB.models.BulkPriceInfo(_.find(IB.globals.bulkPriceInfo,function(item){return item.minQty<=qty&&item.maxQty>=qty;}));var priceInfo=IB.models.bulkInfo.toJSON();if(!_.isEmpty(priceInfo)&&IB.globals.is_myprice_sku!==true){IB.globals.isBulkAvailable=true;priceInfo.qty=qty;var index=_.findIndex(IB.globals.bulkPriceInfo,function(item){return item.minQty<=priceInfo.minQty&&item.maxQty>=priceInfo.maxQty;});$('.AH_BulkPriceOption').removeClass('active');$('.AH_BulkPriceOption_'+index).addClass('active');$('.AH_DiscountContainer').show();$('.AH_ClearSelection').show();return priceInfo;}else{IB.globals.isBulkAvailable=false;priceInfo=IB.models.defaultPriceInfo.toJSON();priceInfo.qty=qty;if(priceInfo.discount<=0){$('.AH_DiscountContainer').hide();}
$('.AH_BulkPriceOption').removeClass('active');$('.AH_ClearSelection').hide();return priceInfo;}}
function updatePrice(qty){updateList(qty);var price=getPriceDetails(qty);var totalTax=Math.round((qty*price.taxPerPiece));var totalPrice=(price.qty*price.pricePerPiece);var taxinclusiveprice=totalPrice+totalTax;var salePrice=totalPrice.toString();IB.views.emiView.emiAmount=Math.round(salePrice)+(price.taxPerPiece*price.qty);IB.views.emiView.checkEmiAvail();var listPrice=Math.round((price.qty*(IB.models.defaultPriceInfo.get('listPrice')))).toString();var tax=totalTax.toString();var savedAmt=parseInt(listPrice)-parseInt(salePrice);$('.AH_QtyBox').val(qty);$('#AH_Discount').hide();$('#AH_ListPrice').hide();$('.saved_amt').text("You saved Rs. "+Math.round(savedAmt));if(salePrice<1){$('#AH_SalePrice').html('<i class="fa fa-rupee"></i> '+parseFloat(salePrice).toFixed(2)).toLocaleString();}else{$('#AH_SalePrice').html('<i class="fa fa-rupee"></i> '+Math.round(parseFloat(salePrice)).toLocaleString());}
if(taxinclusiveprice<1){$('#AH_TaxInclusivePrice').html('<span class="AH_PricePerPiece"><strong><i class="fa fa-rupee"></i></span>'+parseFloat(taxinclusiveprice).toFixed(2).toLocaleString()+'</strong>');}else{$('#AH_TaxInclusivePrice').html('<span class="AH_PricePerPiece"><strong><i class="fa fa-rupee"></i></span>'+Math.round(parseFloat(taxinclusiveprice)).toLocaleString()+'</strong>');}
$('#AH_Tax').text(parseInt(tax).toLocaleString());if(price.discount>0){$('.rupiya_icon').removeClass('hide');$('.offPer').removeClass('hide');$('#AH_ListPrice').css('display','inline-block').text(parseInt(listPrice).toLocaleString());$('#AH_Discount').css('display','inline-block').text(priceRound(price.discount,2).toLocaleString()+"% OFF");}
if(price.discount<=0)
{$('.rupiya_icon').addClass('hide');}
if(price.pricePerPiece<1){var factor=Math.pow(10,2);$('#AH_PricePerPiece').text(priceRound(price.pricePerPiece,2));}else{$('#AH_PricePerPiece').text(priceRound(price.pricePerPiece,2)).toLocaleString();}}
function priceRound(price,decimalPlaces){price=parseFloat(price);decimalPlaces=decimalPlaces||0;var factor=Math.pow(10,decimalPlaces);return Math.round(price*factor)/factor;}
IB.functions.addCatalogDownloadLead=function(email,phone){$.ajax({type:'POST',url:'/catalog_download/',data:{'email':email,'phone':phone,'product':IB.globals.sku,'category':IB.globals.category},success:function(res){IB.globals.catalogDownloadLead=res.lead;}});};IB.functions.downloadCatalog=function(link){window.open(link);trackdownload();};function csrfSafeMethod(method){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));}
$(function(){$(document).bind("ajaxStart.mine",function(){$("#ajaxBusy").hide();});IB.models.defaultPriceInfo=new IB.models.DefaultPriceInfo();var defaultPriceInfo=IB.models.defaultPriceInfo.toJSON();IB.views.emiView=new IB.views.EMIView({el:'#ah-emi-view',emiAmount:defaultPriceInfo.salePrice+(defaultPriceInfo.minQty*defaultPriceInfo.taxPerPiece),});IB.globals.views.offersBtnView=new IB.views.OffersBtnView({el:'#AH_OffersBtn'});if(!IB.globals.oos&&IB.globals.isActive){new IB.views.RECENTLY_VIEWEDView({el:'#AH_CustomersViewed',template:_.template($('#recently-viewed').html()),}).getRecentlyViewed();}
if(IB.globals.oos||!(IB.globals.isActive)){new IB.views.RECENTLY_VIEWEDView({el:'#AH_OOSRecomendationsView',template:_.template($('#AH_OOSProductsTmpl').html()),}).getoosRecommendations();}
new IB.views.RECENTLY_VIEWEDView({el:'#AH_BoughtTogether',template:_.template($('#recently-viewed').html()),}).getBoughtTogether();new IB.views.RECENTLY_VIEWEDView({el:'.AH_CompatibleProductsView',template:_.template($('#AH_CompatibleProducts').html())}).getCompatibleProducts()
$(document).mouseup(function(e){var container=$(".ah-emi-popup");if(!container.is(e.target)&&container.has(e.target).length===0){IB.views.emiView.hideEMIOptions();}});var elevateZoomOptions={cursor:'crosshair',borderSize:1,easing:true,lensOpacity:0.2,lensColour:"black",zoomWindowOffetx:9,zoomWindowOffety:-50,zoomWindowPosition:1,zoomWindowWidth:450,zoomWindowHeight:400,zoomWindowFadeIn:50,zoomWindowFadeOut:50,};$('.AH_MultipleImageList').on('click',function(e){e.preventDefault();$(e.currentTarget).parent().addClass("current");$(e.currentTarget).parent().siblings().removeClass("current");var alt_tag=$(e.currentTarget).find('img').attr('alt');var $listImageSrc=$(e.currentTarget).find('img').attr('data-zoom-image');var $mainImage=$('.AH_ProductDisplayImage').find('img.zoom_img');$mainImage.removeData('elevateZoom');$mainImage.removeData('zoomImage');$('.zoomContainer').remove();$mainImage.attr('src',$listImageSrc);$mainImage.attr('alt',alt_tag);$mainImage.attr('data-zoom-image',$listImageSrc);$(".zoom_img").elevateZoom(elevateZoomOptions);});$(".zoom_img").elevateZoom(elevateZoomOptions);$.ajaxSetup({beforeSend:function(xhr,settings){if(!csrfSafeMethod(settings.type)&&!this.crossDomain){xhr.setRequestHeader("X-CSRFToken",getCookie('csrftoken'));}}});IB.views.codCheck=new IB.views.CodCheck({el:'#AH_CodCheck'});if($('#AH_DownloadCatalog')){IB.globals.views.downloadCatalogBtnView=new IB.views.DownloadCatalogBtnView({el:'#AH_DownloadCatalog'});}
if(IB.globals.bulkPriceInfo.length){IB.globals.views.bulkPriceView=new IB.views.BulkPriceView({el:'#AH_BulkPriceView'});}
$('.AH_Question').hover(function(){$('.AH_PowerBrand').show();},function(){$('.AH_PowerBrand').hide();}),$('.ah-bulk-qty-table-heading').click(function(){$('.ah-bulk-qty-table').toggleClass("hide");$('.ah-bulk-qty-table-heading .fa-angle-down').toggleClass("rotate180");})});function qtyChangedPDP(e){$(".qty-error").hide();var pid=$(e.currentTarget).data('pid');var qtyElem=$("#qty_"+pid);var qtyStep=parseInt(qtyElem.attr('step'));var itemMOQ=parseInt(qtyElem.attr('min'));var qtyVal=parseInt(qtyElem.val());var maxQty=parseInt(qtyElem.data('max-qty'));if(e.currentTarget.name==='qtyIncrease'){if(!isNaN(qtyVal)){qtyVal+=qtyStep;}}else if(e.currentTarget.name==='qtyDecrease'){if(!isNaN(qtyVal)&&(qtyVal>itemMOQ)){qtyVal-=qtyStep;}}else if(!isNaN(qtyVal)){if(qtyVal%qtyStep!==0){qtyVal=(qtyVal-(qtyVal%qtyStep))+qtyStep;}
if(qtyVal<itemMOQ){qtyVal=itemMOQ;}}else{qtyVal=itemMOQ;}
if(!isNaN(maxQty)&&maxQty<qtyVal){qtyVal=maxQty;if(qtyVal%qtyStep!==0){qtyVal=qtyVal-(qtyVal%qtyStep);}
$(".qty-error").html("You can buy upto "+qtyVal+" quantities.").show();}
qtyElem.val(qtyVal);updatePrice(qtyVal);var pincode=$('.AH_CodPincode').val();var sku=$('.AH_CodPincode').attr('data-sku');if(pincode){var data={'pincode':pincode,'sku':sku,'qty':qtyVal};$.ajax({type:'GET',url:'/shipment/check_availability/',dataType:'json',data:data,success:function(result){if(result.freight_charge&&(result.is_cod_available||result.is_prepaid_available)){$('.AH_shipping_faq').removeClass('hide');$('.AH_DeliveryCharges').text('Shipping Charges:');if(result.freight_charge>result.freight_max){$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_max);}
else{$('.AH_DeliveryProductLabel').text('Rs.'+result.freight_charge);}
$('.AH_MaxDeliveryCharges').html('<span class="freeShippingText">Free shipping</span> on buying '+result.free_shipping_qty+'+ quantities');$('.AH_DeliveryFreeLabel').addClass('hide');}
else{$('.AH_shipping_faq').addClass('hide');$('.AH_DeliveryCharges').text('');$('.AH_DeliveryProductLabel').text('');$('.AH_MaxDeliveryCharges').text('');if(result.freight_charge===0){$('.AH_DeliveryCharges').text('Shipping Charges');$('.AH_DeliveryProductLabel').text('FREE');$('.AH_DeliveryFreeLabel').removeClass('hide');}
else{$('.AH_DeliveryFreeLabel').addClass('hide');}}},error:function(err){that.$('.AH_PincodeError').text('Try Again');}});}
$('.ah-show-moq').removeClass("hide");}
function qtyChangedPDPLead(e){var pid=$(e.currentTarget).data('pid');var qtyElem=$("#bulkQuoteInput");var qtyStep=parseInt(qtyElem.attr('step'));var itemMOQ=parseInt(qtyElem.attr('min'));var qtyVal=parseInt(qtyElem.val());if(e.currentTarget.name==='qtyIncrease'){if(!isNaN(qtyVal)){qtyVal+=qtyStep;}
if(qtyVal<itemMOQ){qtyVal=itemMOQ;}
$('.qty_quote').removeClass("email_quoteError");$('.qty_quote_error').text("").hide();}else if(e.currentTarget.name==='qtyDecrease'){if(!isNaN(qtyVal)&&(qtyVal>itemMOQ)){qtyVal-=qtyStep;}
if(qtyVal<itemMOQ){qtyVal=itemMOQ;}}else if(!isNaN(qtyVal)){if(qtyVal%qtyStep!==0){qtyVal=(qtyVal-(qtyVal%qtyStep))+qtyStep;}
if(qtyVal<itemMOQ){qtyVal=itemMOQ;}}else{qtyVal=itemMOQ;}
qtyElem.val(qtyVal);$('#bulkQuoteInput').val(qtyVal);}
var EMAIL_REGEX=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;var phone_regex=/^\d{10,12}$/;function notify_me(){var email=$("#AH_Notifyme").val();var mobile=$("#AH_NotifymeMobile").val();if($.trim(email)===""){$("#AH_notifyerr").show().html("Email is required");return false;}
if(!EMAIL_REGEX.test(email)){$("#AH_notifyerr").show().html("Please Enter a valid email");return false;}
if(!phone_regex.test(mobile)){$("#AH_notifyerr").show().html("Please Enter a valid phone no.");return false;}
else{$("#AH_notifyerr").hide();$.ajax({type:'POST',url:'/user/notifyme/',data:{'email':email,'sku':IB.globals.sku,'mobile':mobile,'csrfmiddleware':getCookie('csrftoken')},success:function(res){if(res.status==='True'){$('#notify-heading').hide();$('#AH_Emailbox').hide();$("#AH_msg1").show();}else{$('#AH_notifyerr').text(res.msg).show();}}});}}
function addToCartHandler(e){$(".plzCheckMsg").css("left","175px");if(IB.globals.checkHyperLocal=="hyperlocal"&&!$(".AH_CodPincode").val()){$(".plzCheckMsg").removeClass("hidden").animate({"left":"-=80px"},"fast");return false;}
if(!IB.globals.ishyperlocal&&IB.globals.checkHyperLocal=="hyperlocal"){$(".plzCheckMsg").removeClass("hidden").animate({"left":"-=80px"},"fast");return false;}
var curr=$(this);var sku=curr.attr('data-sku');var productID=curr.attr('data-productID');var qty=$("#qty_"+productID).val();addToCart(sku,qty);qp('track','add_to_cart');}
function buyNowHandler(e){e.preventDefault();$(".plzCheckMsg").css("left","175px");if(IB.globals.checkHyperLocal=="hyperlocal"&&!$(".AH_CodPincode").val()){$(".plzCheckMsg").removeClass("hidden").animate({"left":"-=80px"},"fast");return false;}
if(IB.globals.checkHyperLocal=="hyperlocal"&&!IB.globals.ishyperlocal){$(".plzCheckMsg").removeClass("hidden").animate({"left":"-=80px"},"fast");return false;}
var sku=$(this).attr('data-sku');var qty=$(this).attr('data-productID');qty=$("#qty_"+qty).val();buynow('',sku,qty);qp('track','buy-now');}
$(document).ready(function(){$("#descTab, #desclink").on('click',function(){$(this).addClass('active');$("#descTab").addClass('active');$("#specTab, #quickTab").removeClass('active');$("#famDesc").show();$("#famSpec, #famQuick").hide();});$("#specTab, #speclink").on('click',function(){$(this).addClass('active');$("#specTab").addClass('active');$("#quickTab, #descTab").removeClass('active');$("#famSpec").show();$("#famDesc, #famQuick").hide();});$("#quickTab, #quickL").on('click',function(){$(this).addClass('active');$("#quickTab").addClass('active');$("#specTab, #descTab").removeClass('active');$("#famDesc, #famSpec").hide();$("#famQuick").show();});IB.globals.ishyperlocal=false;$(document).unbind(".mine");$(".AH_more_details").on('click',function(e){e.preventDefault();$('html, body').animate({scrollTop:$("#productSpecifications").offset().top-100},1000);});$(".related_products").click(function(e){e.preventDefault();$('body').animate({scrollTop:$("#related_products").offset().top-100},1000);});$('.saved_amt').text("You saved Rs. "+Math.round(IB.globals.saveAmt));$(document).on("focus",".AH_CodPincode",function(e){$(".plzCheckMsg").addClass("hidden");});$(".addToCart").on('click',addToCartHandler);$(".AH_addTopurchasePDP").on('click',addToPurchaseList)
$('.AH_BuyNowBtn').on('click',buyNowHandler);$('.AH_vendorBuyNow').on('click',vendorsBuyNowHandler)
$('.AH_vendorAddtoCart').on('click',vendorsAddtoCart)
$('.AH_RequestAppointment').on('click',function(e){e.preventDefault();if($(".quoteOnlyForm").length>0){$('.quoteOnlyForm')[0].reset();}
$('.AH_bulkQtyThankuPopup').show();$('.AH_thankyouPopup').hide();$('.AH_quotationFormSection').show();});$('.AH_bulkQtyPopupClose').on('click',function(e){e.preventDefault();$('.AH_bulkQtyThankuPopup').hide();});$('.email').on('click',function(){$('.emailPopup').show();$('.email_block_popup').show();});$('.close-email-popup').on('click',function(){$('.email_block_popup').hide();$('.emailPopup').hide();});function validateEmails(string){var result=string.replace(/\s/g,"").split(/,/);var errors=[];for(var i=0;i<result.length;i++){if(!EMAIL_REGEX.test(result[i])){errors=result[i]+'is not valid.';}}
if(errors.length>0){return false;}else{return true;}}
$(document).on("keyup","input",function(){$('.error').text("");});$('#send_email').on('submit',function(e){e.preventDefault();var data={};data.receiver_emails=$('#receiver_emails').val();data.sender_email=$('#sender_email').val();data.message=$('#message').val();data.product_sku=IB.globals.sku;data.product_title=$('.pdpContent > .heading').find('span').text().trim();data.csrfmiddlewaretoken=getCookie('csrftoken');if($.trim(data.receiver_emails)===""){$('#receiver_emails').focus();return false;}
if(!validateEmails($.trim(data.receiver_emails))){$('.receiver-email').text("receiver email is not valid.")
return false}
if(!EMAIL_REGEX.test(data.sender_email)){$('.sender-email').text("sender email is not valid.")
return false;}
$('.error').text("");$.ajax({type:"POST",url:'/user/share-pdp/',data:data,success:function(res){if(res==true){$('.email_block_popup').hide();$('.emailMsg').show();setTimeout(function(){$('.emailMsg').hide();$('.emailPopup').hide();$('#receiver_emails').val("");$('#sender_email').val("");},3000)}}});});$(window).scroll(function(){var sticky=$('.fullBig'),topBar=$('.topBar'),stickyPrice=$('.AH_RightArea .rupeesArea'),scroll=$(window).scrollTop();if(scroll>=200){sticky.css({'position':'fixed','display':'table','top':'0'});stickyPrice.css('top','0')
stickyPrice.addClass("fixed")}else{sticky.css({'position':'','display':'none'});stickyPrice.removeClass("fixed");}
var check=$(".leftArea").height()
if($(window).scrollTop()>($("footer").position().top-$('.AH_RightArea .rupeesArea').height())){stickyPrice.removeClass("fixed")
stickyPrice.css('top',check-stickyPrice.height())
stickyPrice.addClass("bottom")}else{stickyPrice.removeClass("bottom")
stickyPrice.css('top','0')}
if(scroll>check){sticky.css({'position':'','display':'none'});}});var maxLength=5;$(".show-read-more").each(function(){var myStr=$(this).text().trim().split(" ");var newStr=[],removedStr=[]
if(myStr.length>maxLength){for(var i=0;i<maxLength;i++){newStr.push(myStr[i])}
newStr.join(" ")
for(var j=maxLength;j<myStr.length;j++){removedStr.push(myStr[j])}
removedStr.join(" ")
$(this).empty().html(newStr);$(this).append(' <a href="javascript:void(0);" class="read-more">read more...</a>');$(this).append('<p class="more-text">'+removedStr+'</p>');}});$(".read-more").on('click',function(){$(this).siblings(".more-text").contents().unwrap();$(this).remove();});$(".print").click(function(){var mode='iframe';var close=mode=="popup";var options={mode:mode,popClose:close};$("div#main").printArea(options);});$(document).on("scroll",onScroll);$('.AH_Links_Header > a[href^="#"]').on('click',function(e){e.preventDefault();$(document).off("scroll");$('a').each(function(){$(this).removeClass('active');})
$(this).addClass('active');var target=this.hash,menu=target;var $target=$(target);$('html, body').stop().animate({'scrollTop':$target.position().top},500,'swing',function(){window.location.hash=target;$(document).on("scroll",onScroll);});});$('.AH_CompatibleLink > a[href^="#"]').on('click',function(e){e.preventDefault();$(document).off("scroll");$('a.compatLink').addClass('active');var target=this.hash,menu=target;var $target=$(target);$('html, body').stop().animate({'scrollTop':$target.position().top},500,'swing',function(){window.location.hash=target;$(document).on("scroll",onScroll);});});$('.customer.share').on("click",function(e){$(this).customerPopup(e);});var max=6;$('input[name="pincodePdp"]').on("input",function(){$(".AH_PincodeError").hide()
this.value=this.value.replace(/[^0-9]/g,"")});$('.AH_AddToMyPrice').click(function(e){var data={"sku":IB.globals.sku,"tip":IB.globals.pricePerPiece,'csrfmiddlewaretoken':getCookie('csrftoken')};AJAX_POST_JSON("/user/addto-myprice/",data,function(res){$(".logincontent").html(res.msg);});});$('.AH_PDPLogin').click(function(){var tmpl=$('#AH_LoginSignUpTmpl').html();$('body').append(tmpl);IB.globals.views.loginSignupView=new IB.views.LoginSignUpView({el:'#AH_LoginSignUpView',template:_.template($('#AH_LoginSignUpTmpl').html()),popupType:'login'}).render();});$.ajax({type:'GET',url:"/shipping_information/"+IB.globals.sku,success:function(res){$('#shipping_information').html(res);},error:function(err){alert("This can not be processed now.");}});$('.clickInformationIcon').hover(function(){var qty=$('.AH_QtyBox').val()||1;updateList(qty);});$(".AH_supplierInfo").on("click",function(){$(".suplierInfoSec_inner").toggleClass("hide");});});function vendorsBuyNowHandler(e){e.preventDefault();var sku=$(this).attr('data-sku');var qty=$(this).attr('data-productID');qty=$("#qty_"+qty).val();var seller_code=$(this).attr('data-sellercode');buynow('',sku,qty,seller_code);qp('track','buy-now');}
function vendorsAddtoCart(e){e.preventDefault();var curr=$(this);var sku=curr.attr('data-sku');var productID=curr.attr('data-productID');var qty=$("#qty_"+productID).val();var seller_code=$(this).attr('data-sellercode');addToCart(sku,qty,seller_code);qp('track','add_to_cart');}
function updateList(qty){var price=getPriceDetails(qty);var totalTax=Math.round((qty*price.taxPerPiece));var totalPrice=(price.qty*price.pricePerPiece);var taxinclusiveprice=totalPrice+totalTax;var salePrice=totalPrice.toString();var tax=totalTax.toString();var listPrice=Math.round((price.qty*(IB.models.defaultPriceInfo.get('listPrice')))).toString();$('#AH_Discount_popup').hide();$('#AH_ListPrice_popup').hide();$('.AH_Discount_popup_tr').addClass('hide');$('.AH_ListPrice_popup_tr').addClass('hide');if(price.discount>0){$('.AH_Discount_popup_tr').removeClass('hide');$('.AH_ListPrice_popup_tr').removeClass('hide');$('#AH_ListPrice_popup').css('display','inline').text(parseInt(listPrice).toLocaleString());$('#AH_Discount_popup').css('display','inline').text(priceRound(price.discount,2).toLocaleString()+"%");}
if(salePrice<1){$('#AH_SalePrice_popup').html('<i class="fa fa-rupee"></i> '+parseFloat(salePrice).toFixed(2)).toLocaleString();}else{$('#AH_SalePrice_popup').html('<i class="fa fa-rupee"></i> '+Math.round(parseFloat(salePrice)).toLocaleString());}}
function onScroll(event){var scrollPos=$(document).scrollTop();$('.AH_Links_Header a').each(function(){var currLink=$(this);var refElement=$(currLink.attr("href"));if(refElement.position().top<=scrollPos&&(refElement.position().top+refElement.height())>scrollPos){$('.AH_Links_Header a').removeClass("active");}
else{currLink.removeClass("active");}});};(function($){$.fn.customerPopup=function(e,intWidth,intHeight,blnResize){e.preventDefault();intWidth=intWidth||'500';intHeight=intHeight||'400';var strResize=(blnResize?'yes':'no');var strTitle=((typeof this.attr('title')!=='undefined')?this.attr('title'):'Social Share'),strParam='width='+intWidth+',height='+intHeight+',resizable='+strResize,objWindow=window.open(this.attr('href'),strTitle,strParam).focus();}}(jQuery));(function($){var counter=0;var modes={iframe:"iframe",popup:"popup"};var standards={strict:"strict",loose:"loose",html5:"html5"};var defaults={mode:modes.iframe,standard:standards.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:'',popClose:false,extraCss:'',extraHead:'',retainAttr:["id","class","style"]};var settings={};$.fn.printArea=function(options){$.extend(settings,defaults,options);counter++;var idPrefix="printArea_";$("[id^="+idPrefix+"]").remove();settings.id=idPrefix+counter;var $printSource=$(this);var PrintAreaWindow=PrintArea.getPrintWindow();PrintArea.write(PrintAreaWindow.doc,$printSource);setTimeout(function(){PrintArea.print(PrintAreaWindow);},1000);};var PrintArea={print:function(PAWindow){var paWindow=PAWindow.win;$(PAWindow.doc).ready(function(){paWindow.focus();paWindow.print();if(settings.mode==modes.popup&&settings.popClose)
setTimeout(function(){paWindow.close();},2000);});},write:function(PADocument,$ele){PADocument.open();PADocument.write(PrintArea.docType()+"<html>"+PrintArea.getHead()+PrintArea.getBody($ele)+"</html>");PADocument.close();},docType:function(){if(settings.mode==modes.iframe)return"";if(settings.standard==standards.html5)return"<!DOCTYPE html>";var transitional=settings.standard==standards.loose?" Transitional":"";var dtd=settings.standard==standards.loose?"loose":"strict";return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+transitional+'//EN" "http://www.w3.org/TR/html4/'+dtd+'.dtd">';},getHead:function(){var extraHead="";var links="";if(settings.extraHead)settings.extraHead.replace(/([^,]+)/g,function(m){extraHead+=m});$(document).find("link").filter(function(){var relAttr=$(this).attr("rel");return($.type(relAttr)==='undefined')==false&&relAttr.toLowerCase()=='stylesheet';}).filter(function(){var mediaAttr=$(this).attr("media");return $.type(mediaAttr)==='undefined'||mediaAttr==""||mediaAttr.toLowerCase()=='print'||mediaAttr.toLowerCase()=='all'}).each(function(){links+='<link type="text/css" rel="stylesheet" href="'+$(this).attr("href")+'" >';});if(settings.extraCss)settings.extraCss.replace(/([^,\s]+)/g,function(m){links+='<link type="text/css" rel="stylesheet" href="'+m+'">'});return"<head><title>"+settings.popTitle+"</title>"+extraHead+links+"</head>";},getBody:function(elements){var htm="";var attrs=settings.retainAttr;elements.each(function(){var ele=PrintArea.getFormData($(this));var attributes=""
for(var x=0;x<attrs.length;x++){var eleAttr=$(ele).attr(attrs[x]);if(eleAttr)attributes+=(attributes.length>0?" ":"")+attrs[x]+"='"+eleAttr+"'";}
htm+='<div '+attributes+'>'+$(ele).html()+'</div>';});return"<body>"+htm+"</body>";},getFormData:function(ele){var copy=ele.clone();var copiedInputs=$("input,select,textarea",copy);$("input,select,textarea",ele).each(function(i){var typeInput=$(this).attr("type");if($.type(typeInput)==='undefined')typeInput=$(this).is("select")?"select":$(this).is("textarea")?"textarea":"";var copiedInput=copiedInputs.eq(i);if(typeInput=="radio"||typeInput=="checkbox")copiedInput.attr("checked",$(this).is(":checked"));else if(typeInput=="text")copiedInput.attr("value",$(this).val());else if(typeInput=="select")
$(this).find("option").each(function(i){if($(this).is(":selected"))$("option",copiedInput).eq(i).attr("selected",true);});else if(typeInput=="textarea")copiedInput.text($(this).val());});return copy;},getPrintWindow:function(){switch(settings.mode){case modes.iframe:var f=new PrintArea.Iframe();return{win:f.contentWindow||f,doc:f.doc};case modes.popup:var p=new PrintArea.Popup();return{win:p,doc:p.doc};}},Iframe:function(){var frameId=settings.id;var iframeStyle='border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;';var iframe;try{iframe=document.createElement('iframe');document.body.appendChild(iframe);$(iframe).attr({style:iframeStyle,id:frameId,src:"#"+new Date().getTime()});iframe.doc=null;iframe.doc=iframe.contentDocument?iframe.contentDocument:(iframe.contentWindow?iframe.contentWindow.document:iframe.document);}
catch(e){throw e+". iframes may not be supported in this browser.";}
if(iframe.doc==null)throw"Cannot find document.";return iframe;},Popup:function(){var windowAttr="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";windowAttr+=",width="+settings.popWd+",height="+settings.popHt;windowAttr+=",resizable=yes,screenX="+settings.popX+",screenY="+settings.popY+",personalbar=no,scrollbars=yes";var newWin=window.open("","_blank",windowAttr);newWin.doc=newWin.document;return newWin;}};})(jQuery);IB.models.QuoteOnly=Backbone.Model.extend({validation:{email_quote:[{required:true,msg:"Please enter your email id"},{pattern:'email',msg:"Please enter correct email"}],phone_quote:{required:true,pattern:/^\d{10,12}$/,msg:"Invalid phone number"},name_quote:{required:true,msg:"Please enter your name"},pincode_quote:{required:true,pattern:/^\d{6}$/,msg:"Please enter pincode"},quantity_quote:{required:true,msg:"Please enter your quantity"},qty_quote:{min:IB.globals.minQuoteQty,msg:"Please select value greater than "+IB.globals.minQuoteQtyError}}});IB.views.QuoteOnly=IB.views.BaseView.extend({model:new IB.models.QuoteOnly(),events:{'click .AH_buyNow':'quoteonly','focus input ':function(){$('.name_quote').removeClass("email_quoteError");$('.phone_quote').removeClass("email_quoteError");$('.email_quote').removeClass("email_quoteError");$('.pincode_quote').removeClass("email_quoteError");$('.expected_price_quote').removeClass("email_quoteError");$('.qty_quote').removeClass("email_quoteError");$('.name_quote_error').text("").hide();$('.phone_quote_error').text("").hide();$('.email_quote_error').text("").hide();$('.pincode_quote_error').text("").hide();$('.expected_price_quote_error').text("").hide();$('.qty_quote_error').text("").hide();},'input .restrict_input':function(e){var val=$(e.currentTarget).val()||'';var lastChar=val.slice(val.length-1,val.length);var nameRegex=/^[0-9]$/;if(!nameRegex.test(lastChar)){$(e.currentTarget).val(val.slice(0,val.length-1));}}},quoteonly:function(e){e.preventDefault();var name=this.$('.name_quote').val();var email=this.$('.email_quote').val();var pincode=this.$('.pincode_quote').val();var expected_price=this.$('.expected_price_quote').val();var phone=this.$('.phone_quote').val();var quantity=this.$('.AH_QtyBox').val()||1;var quoteQuantity=this.$('.qty_quote').val()||IB.globals.minQuoteQty;this.model.set('email_quote',email);this.model.set('phone_quote',phone);this.model.set('name_quote',name);this.model.set('pincode_quote',pincode);this.model.set('expected_price_quote',expected_price);this.model.set('quantity_quote',quantity);this.model.set('qty_quote',quoteQuantity);var errors=this.model.validate();if(!_.isEmpty(errors)){$.each(errors,function(key,val){$('.'+key).addClass('email_quoteError');$('.'+key+'_error').text(val).show();});return;}
if(_.isEmpty(errors)){$.ajax({type:'POST',url:"/quote-only/",data:$(".quoteOnlyForm").serialize(),success:function(res){$('.AH_quotationFormSection').hide();$('.AH_thankyouPopup').show();},error:function(err){alert("This can not be processed now.");}});}}})
IB.models.ReportProduct=Backbone.Model.extend({validation:{email:[{required:true,msg:"please enter your email id"},{pattern:'email',msg:"please enter a valid email id"}],name:[{required:true,msg:'Please enter name',},{pattern:/^[A-Za-z .-]{1,40}$/,msg:'Invalid Name'}],reason:{required:true,msg:"Please select atleast one checkbox."},description:{required:true,msg:"Please fill the issue description"}}});IB.views.ReportProductView=IB.views.BaseView.extend({template:_.template($('#AH_ReportProductTmpl').html()),model:new IB.models.ReportProduct(),initialize:function(){if(IB.globals.is_authenticated){this.model.set('email',IB.globals.useremail);this.model.set('name',IB.globals.username||"annonymous");}
this.issueTypes=[];},events:{'submit .AH_ReportProductForm':'submitReportProduct','click .AH_Close':'closePopup',},serialize:function(){return{isAuthenticated:IB.globals.is_authenticated,};},submitReportProduct:function(e){e.preventDefault();var formData=$(e.currentTarget).serializeArray();_.each(formData,function(field){if(field.name!=='reason'){this.model.set(field.name,field.value);}
this.$('.AH_'+field.name+'_error').text('').hide();},this);this.issueTypes=[];_.each(this.$('.AH_ReportCheckbox'),function(element){if(element.checked){this.issueTypes.push(element.value);}},this);this.model.set('reason',this.issueTypes.toString());var errors=this.model.validate();if(errors){_.each(errors,function(error,key){this.$('.AH_'+key+'_error').text(error).show();},this);return;}
var sku=$('#AH_report_sku').val();var url='/report-product/'+sku+'/';$.ajax({type:'POST',url:url,data:this.model.toJSON(),success:function(res){if(res['status']=='success')
alert("Thanks for your response");else
alert("error"+" "+res['error']);},error:function(err){alert("This can not be processed now.");}});this.removeView();this.remove();},closePopup:function(){this.removeView();this.remove();},});IB.views.AdsalesView=IB.views.BaseView.extend({serialize:function(){return{adsales:this.adsales?this.adsales[0]:null};},afterRender(){if(_.isEmpty(this.adsales)){(adsbygoogle=window.adsbygoogle||[]).push({});}}});$(function(){new IB.views.QuoteOnly({el:$(".quoteOnlyForm")});$('.AH_ReportPopUpButton').on('click',function(){var tmpl=$('#AH_ReportProductTmpl').html();$('body').append(tmpl);IB.globals.views.reportProductView=new IB.views.ReportProductView({el:'.AH_ReportProductView',}).render();});$.ajax({url:'/api/adsales/',data:{cat_id:IB.globals.parents[0].id,banner_type:'adsales_pdp',platform:'desktop'},success:function(res){new IB.views.AdsalesView({el:'#AH_AdsalesPdpTopView',adsales:res.results.adsales,template:_.template($('#AH_AdsalesPdpTopTmpl').html())}).render();new IB.views.AdsalesView({el:'#AH_AdsalesPdpBottomView',adsales:res.results.adsales,template:_.template($('#AH_AdsalesPdpBottomTmpl').html())}).render();}});});if(typeof Object.create!=='function'){Object.create=function(obj){function F(){};F.prototype=obj;return new F();};}
(function($,window,document,undefined){var ElevateZoom={init:function(options,elem){var self=this;self.elem=elem;self.$elem=$(elem);self.imageSrc=self.$elem.data("zoom-image")?self.$elem.data("zoom-image"):self.$elem.attr("src");self.options=$.extend({},$.fn.elevateZoom.options,options);if(self.options.tint){self.options.lensColour="none",self.options.lensOpacity="1"}
if(self.options.zoomType=="inner"){self.options.showLens=false;}
self.$elem.parent().removeAttr('title').removeAttr('alt');self.zoomImage=self.imageSrc;self.refresh(1);$('#'+self.options.gallery+' a').click(function(e){if(self.options.galleryActiveClass){$('#'+self.options.gallery+' a').removeClass(self.options.galleryActiveClass);$(this).addClass(self.options.galleryActiveClass);}
e.preventDefault();if($(this).data("zoom-image")){self.zoomImagePre=$(this).data("zoom-image")}
else{self.zoomImagePre=$(this).data("image");}
self.swaptheimage($(this).data("image"),self.zoomImagePre);return false;});},refresh:function(length){var self=this;setTimeout(function(){self.fetch(self.imageSrc);},length||self.options.refresh);},fetch:function(imgsrc){var self=this;var newImg=new Image();newImg.onload=function(){self.largeWidth=newImg.width;self.largeHeight=newImg.height;self.startZoom();self.currentImage=self.imageSrc;self.options.onZoomedImageLoaded(self.$elem);}
newImg.src=imgsrc;return;},startZoom:function(){var self=this;self.nzWidth=self.$elem.width();self.nzHeight=self.$elem.height();self.isWindowActive=false;self.isLensActive=false;self.isTintActive=false;self.overWindow=false;if(self.options.imageCrossfade){self.zoomWrap=self.$elem.wrap('<div style="height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;" class="zoomWrapper" />');self.$elem.css('position','absolute');}
self.zoomLock=1;self.scrollingLock=false;self.changeBgSize=false;self.currentZoomLevel=self.options.zoomLevel;self.nzOffset=self.$elem.offset();self.widthRatio=(self.largeWidth/self.currentZoomLevel)/self.nzWidth;if(self.widthRatio<=1)
{self.largeWidth=self.largeWidth*3;}
self.heightRatio=(self.largeHeight/self.currentZoomLevel)/self.nzHeight;if(self.heightRatio<=1)
{self.largeHeight=self.largeHeight*3;}
if(self.heightRatio>1.0&&self.heightRatio<2.0)
{self.largeHeight=self.largeHeight*2;}
if(self.widthRatio>1.0&&self.widthRatio<2.0)
{self.largeWidth=self.largeWidth*2;}
if(self.heightRatio>2.0&&self.heightRatio<3.0)
{self.largeHeight=self.largeHeight+self.largeHeight/2;}
if(self.widthRatio>2.0&&self.widthRatio<3.0)
{self.largeWidth=self.largeWidth+self.largeWidth/2;}
if(self.options.zoomType=="window"){self.zoomWindowStyle="overflow: hidden;"
+"background-position: 0px 0px;text-align:center;"
+"background-color: "+String(self.options.zoomWindowBgColour)
+";width: "+String(self.options.zoomWindowWidth)+"px;"
+"height: "+String(self.options.zoomWindowHeight)
+"px;float: left;"
+"background-size: "+self.largeWidth/self.currentZoomLevel+"px "+self.largeHeight/self.currentZoomLevel+"px;"
+"display: none;z-index:100;"
+"border: "+String(self.options.borderSize)
+"px solid "+self.options.borderColour
+";background-repeat: no-repeat;"
+"position: absolute;";}
if(self.options.zoomType=="inner"){var borderWidth=self.$elem.css("border-left-width");self.zoomWindowStyle="overflow: hidden;"
+"margin-left: "+String(borderWidth)+";"
+"margin-top: "+String(borderWidth)+";"
+"background-position: 0px 0px;"
+"width: "+String(self.nzWidth)+"px;"
+"height: "+String(self.nzHeight)+"px;"
+"px;float: left;"
+"display: none;"
+"cursor:"+(self.options.cursor)+";"
+"px solid "+self.options.borderColour
+";background-repeat: no-repeat;"
+"position: absolute;";}
if(self.options.zoomType=="window"){if(self.nzHeight<self.options.zoomWindowWidth/self.widthRatio){lensHeight=self.nzHeight;}
else{lensHeight=String((self.options.zoomWindowHeight/self.heightRatio))}
if(self.largeWidth<self.options.zoomWindowWidth){lensWidth=self.nzWidth;}
else{lensWidth=(self.options.zoomWindowWidth/self.widthRatio);}
self.lensStyle="background-position: 0px 0px;width: "+String((self.options.zoomWindowWidth)/self.widthRatio)+"px;height: "+String((self.options.zoomWindowHeight)/self.heightRatio)
+"px;float: left;display: none;"
+"overflow: hidden;"
+"z-index: 999;"
+"-webkit-transform: translateZ(0);"
+"opacity:"+(self.options.lensOpacity)+";filter: alpha(opacity = "+(self.options.lensOpacity*100)+"); zoom:1;"
+"width:"+lensWidth+"px;"
+"height:"+lensHeight+"px;"
+"background-color:"+(self.options.lensColour)+";"
+"cursor:"+(self.options.cursor)+";"
+"border: "+(self.options.lensBorderSize)+"px"+" solid "+(self.options.lensBorderColour)+";background-repeat: no-repeat;position: absolute;";}
self.tintStyle="display: block;"
+"position: absolute;"
+"background-color: "+self.options.tintColour+";"
+"filter:alpha(opacity=0);"
+"opacity: 0;"
+"width: "+self.nzWidth+"px;"
+"height: "+self.nzHeight+"px;";self.lensRound='';if(self.options.zoomType=="lens"){self.lensStyle="background-position: 0px 0px;"
+"float: left;display: none;"
+"border: "+String(self.options.borderSize)+"px solid "+self.options.borderColour+";"
+"width:"+String(self.options.lensSize)+"px;"
+"height:"+String(self.options.lensSize)+"px;"
+"background-repeat: no-repeat;position: absolute;";}
if(self.options.lensShape=="round"){self.lensRound="border-top-left-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;"
+"border-top-right-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;"
+"border-bottom-left-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;"
+"border-bottom-right-radius: "+String(self.options.lensSize/2+self.options.borderSize)+"px;";}
self.zoomContainer=$('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+self.nzOffset.left+'px;top:'+self.nzOffset.top+'px;height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;"></div>');$('body').append(self.zoomContainer);if(self.options.containLensZoom&&self.options.zoomType=="lens"){self.zoomContainer.css("overflow","hidden");}
if(self.options.zoomType!="inner"){self.zoomLens=$("<div class='zoomLens' style='"+self.lensStyle+self.lensRound+"'>&nbsp;</div>").appendTo(self.zoomContainer).click(function(){self.$elem.trigger('click');});if(self.options.tint){self.tintContainer=$('<div/>').addClass('tintContainer');self.zoomTint=$("<div class='zoomTint' style='"+self.tintStyle+"'></div>");self.zoomLens.wrap(self.tintContainer);self.zoomTintcss=self.zoomLens.after(self.zoomTint);self.zoomTintImage=$('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+self.nzWidth+'px; height: '+self.nzHeight+'px;" src="'+self.imageSrc+'">').appendTo(self.zoomLens).click(function(){self.$elem.trigger('click');});}}
if(isNaN(self.options.zoomWindowPosition)){self.zoomWindow=$("<div style='z-index:999;left:"+(self.windowOffsetLeft)+"px;top:"+(self.windowOffsetTop)+"px;"+self.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo('body').click(function(){self.$elem.trigger('click');});}else{self.zoomWindow=$("<div style='z-index:999;left:"+(self.windowOffsetLeft)+"px;top:"+(self.windowOffsetTop)+"px;"+self.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(self.zoomContainer).click(function(){self.$elem.trigger('click');});}
self.zoomWindowContainer=$('<div/>').addClass('zoomWindowContainer').css({"width":self.options.zoomWindowWidth,"z-index":99999});self.zoomWindow.wrap(self.zoomWindowContainer);if(self.options.zoomType=="lens"){self.zoomLens.css({backgroundImage:"url('"+self.imageSrc+"')"});}
if(self.options.zoomType=="window"){self.zoomWindow.css({backgroundImage:"url('"+self.imageSrc+"')"});}
if(self.options.zoomType=="inner"){self.zoomWindow.css({backgroundImage:"url('"+self.imageSrc+"')"});}
self.$elem.bind('touchmove',function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch);});self.zoomContainer.bind('touchmove',function(e){if(self.options.zoomType=="inner"){self.showHideWindow("show");}
e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch);});self.zoomContainer.bind('touchend',function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide");}
if(self.options.tint&&self.options.zoomType!="inner"){self.showHideTint("hide");}});self.$elem.bind('touchend',function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide");}
if(self.options.tint&&self.options.zoomType!="inner"){self.showHideTint("hide");}});if(self.options.showLens){self.zoomLens.bind('touchmove',function(e){e.preventDefault();var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];self.setPosition(touch);});self.zoomLens.bind('touchend',function(e){self.showHideWindow("hide");if(self.options.showLens){self.showHideLens("hide");}
if(self.options.tint&&self.options.zoomType!="inner"){self.showHideTint("hide");}});}
self.$elem.bind('mousemove',function(e){if(self.overWindow==false){self.setElements("show");}
if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e;}
self.lastX=e.clientX;self.lastY=e.clientY;});self.zoomContainer.bind('mousemove',function(e){if(self.overWindow==false){self.setElements("show");}
if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e;}
self.lastX=e.clientX;self.lastY=e.clientY;});if(self.options.zoomType!="inner"){self.zoomLens.bind('mousemove',function(e){if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e;}
self.lastX=e.clientX;self.lastY=e.clientY;});}
if(self.options.tint&&self.options.zoomType!="inner"){self.zoomTint.bind('mousemove',function(e){if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e;}
self.lastX=e.clientX;self.lastY=e.clientY;});}
if(self.options.zoomType=="inner"){self.zoomWindow.bind('mousemove',function(e){if(self.lastX!==e.clientX||self.lastY!==e.clientY){self.setPosition(e);self.currentLoc=e;}
self.lastX=e.clientX;self.lastY=e.clientY;});}
self.zoomContainer.add(self.$elem).mouseenter(function(){if(self.overWindow==false){self.setElements("show");}}).mouseleave(function(){if(!self.scrollLock){self.setElements("hide");self.options.onDestroy(self.$elem);}});if(self.options.zoomType!="inner"){self.zoomWindow.mouseenter(function(){self.overWindow=true;self.setElements("hide");}).mouseleave(function(){self.overWindow=false;});}
if(self.options.zoomLevel!=1){}
if(self.options.minZoomLevel){self.minZoomLevel=self.options.minZoomLevel;}
else{self.minZoomLevel=self.options.scrollZoomIncrement*2;}
if(self.options.scrollZoom){self.zoomContainer.add(self.$elem).bind('mousewheel DOMMouseScroll MozMousePixelScroll',function(e){self.scrollLock=true;clearTimeout($.data(this,'timer'));$.data(this,'timer',setTimeout(function(){self.scrollLock=false;},250));var theEvent=e.originalEvent.wheelDelta||e.originalEvent.detail*-1
e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(theEvent/120>0){if(self.currentZoomLevel>=self.minZoomLevel){self.changeZoomLevel(self.currentZoomLevel-self.options.scrollZoomIncrement);}}
else{if(self.options.maxZoomLevel){if(self.currentZoomLevel<=self.options.maxZoomLevel){self.changeZoomLevel(parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement);}}
else{self.changeZoomLevel(parseFloat(self.currentZoomLevel)+self.options.scrollZoomIncrement);}}
return false;});}},setElements:function(type){var self=this;if(!self.options.zoomEnabled){return false;}
if(type=="show"){if(self.isWindowSet){if(self.options.zoomType=="inner"){self.showHideWindow("show");}
if(self.options.zoomType=="window"){self.showHideWindow("show");}
if(self.options.showLens){self.showHideLens("show");}
if(self.options.tint&&self.options.zoomType!="inner"){self.showHideTint("show");}}}
if(type=="hide"){if(self.options.zoomType=="window"){self.showHideWindow("hide");}
if(!self.options.tint){self.showHideWindow("hide");}
if(self.options.showLens){self.showHideLens("hide");}
if(self.options.tint){self.showHideTint("hide");}}},setPosition:function(e){var self=this;if(!self.options.zoomEnabled){return false;}
self.nzHeight=self.$elem.height();self.nzWidth=self.$elem.width();self.nzOffset=self.$elem.offset();if(self.options.tint&&self.options.zoomType!="inner"){self.zoomTint.css({top:0});self.zoomTint.css({left:0});}
if(self.options.responsive&&!self.options.scrollZoom){if(self.options.showLens){if(self.nzHeight<self.options.zoomWindowWidth/self.widthRatio){lensHeight=self.nzHeight;}
else{lensHeight=(self.options.zoomWindowHeight/self.heightRatio);}
if(self.largeWidth<self.options.zoomWindowWidth){lensWidth=self.nzWidth;}
else{lensWidth=(self.options.zoomWindowWidth/self.widthRatio);}
self.widthRatio=self.largeWidth/self.nzWidth;self.heightRatio=self.largeHeight/self.nzHeight;if(self.options.zoomType!="lens"){if(self.nzHeight<self.options.zoomWindowWidth/self.widthRatio){lensHeight=self.nzHeight;}
else{lensHeight=String((self.options.zoomWindowHeight/self.heightRatio))}
if(self.nzWidth<self.options.zoomWindowHeight/self.heightRatio){lensWidth=self.nzWidth;}
else{lensWidth=String((self.options.zoomWindowWidth/self.widthRatio));}
self.zoomLens.css('width',120);self.zoomLens.css('height',120);if(self.options.tint){self.zoomTintImage.css('width',self.nzWidth);self.zoomTintImage.css('height',self.nzHeight);}}
if(self.options.zoomType=="lens"){self.zoomLens.css({width:String(self.options.lensSize)+'px',height:String(self.options.lensSize)+'px'})}}}
self.zoomContainer.css({top:self.nzOffset.top});self.zoomContainer.css({left:self.nzOffset.left});self.mouseLeft=parseInt(e.pageX-self.nzOffset.left);self.mouseTop=parseInt(e.pageY-self.nzOffset.top);if(self.options.zoomType=="window"){self.Etoppos=(self.mouseTop<(self.zoomLens.height()/2));self.Eboppos=(self.mouseTop>self.nzHeight-(self.zoomLens.height()/2)-(self.options.lensBorderSize*2));self.Eloppos=(self.mouseLeft<0+((self.zoomLens.width()/2)));self.Eroppos=(self.mouseLeft>(self.nzWidth-(self.zoomLens.width()/2)-(self.options.lensBorderSize*2)));}
if(self.options.zoomType=="inner"){self.Etoppos=(self.mouseTop<((self.nzHeight/2)/self.heightRatio));self.Eboppos=(self.mouseTop>(self.nzHeight-((self.nzHeight/2)/self.heightRatio)));self.Eloppos=(self.mouseLeft<0+(((self.nzWidth/2)/self.widthRatio)));self.Eroppos=(self.mouseLeft>(self.nzWidth-(self.nzWidth/2)/self.widthRatio-(self.options.lensBorderSize*2)));}
if(self.mouseLeft<0||self.mouseTop<0||self.mouseLeft>self.nzWidth||self.mouseTop>self.nzHeight){self.setElements("hide");return;}
else{if(self.options.showLens){self.lensLeftPos=String(Math.floor(self.mouseLeft-self.zoomLens.width()/2));self.lensTopPos=String(Math.floor(self.mouseTop-self.zoomLens.height()/2));}
if(self.Etoppos){self.lensTopPos=0;}
if(self.Eloppos){self.windowLeftPos=0;self.lensLeftPos=0;self.tintpos=0;}
if(self.options.zoomType=="window"){if(self.Eboppos){self.lensTopPos=Math.max((self.nzHeight)-self.zoomLens.height()-(self.options.lensBorderSize*2),0);}
if(self.Eroppos){self.lensLeftPos=(self.nzWidth-(self.zoomLens.width())-(self.options.lensBorderSize*2));}}
if(self.options.zoomType=="inner"){if(self.Eboppos){self.lensTopPos=Math.max(((self.nzHeight)-(self.options.lensBorderSize*2)),0);}
if(self.Eroppos){self.lensLeftPos=(self.nzWidth-(self.nzWidth)-(self.options.lensBorderSize*2));}}
if(self.options.zoomType=="lens"){self.windowLeftPos=String(((e.pageX-self.nzOffset.left)*self.widthRatio-self.zoomLens.width()/2)*(-1));self.windowTopPos=String(((e.pageY-self.nzOffset.top)*self.heightRatio-self.zoomLens.height()/2)*(-1));self.zoomLens.css({backgroundPosition:self.windowLeftPos+'px '+self.windowTopPos+'px'});if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
else{if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
self.changeBgSize=false;}
self.setWindowPostition(e);}
if(self.options.tint&&self.options.zoomType!="inner"){self.setTintPosition(e);}
if(self.options.zoomType=="window"){self.setWindowPostition(e);}
if(self.options.zoomType=="inner"){self.setWindowPostition(e);}
if(self.options.showLens){if(self.fullwidth&&self.options.zoomType!="lens"){self.lensLeftPos=0;}
self.zoomLens.css({left:self.lensLeftPos+'px',top:self.lensTopPos+'px'})}}},showHideWindow:function(change){var self=this;if(change=="show"){if(!self.isWindowActive){if(self.options.zoomWindowFadeIn){self.zoomWindow.stop(true,true,false).fadeIn(self.options.zoomWindowFadeIn);}
else{self.zoomWindow.show();}
self.isWindowActive=true;}}
if(change=="hide"){if(self.isWindowActive){if(self.options.zoomWindowFadeOut){self.zoomWindow.stop(true,true).fadeOut(self.options.zoomWindowFadeOut,function(){if(self.loop){clearInterval(self.loop);self.loop=false;}});}
else{self.zoomWindow.hide();}
self.isWindowActive=false;}}},showHideLens:function(change){var self=this;if(change=="show"){if(!self.isLensActive){if(self.options.lensFadeIn){self.zoomLens.stop(true,true,false).fadeIn(self.options.lensFadeIn);}
else{self.zoomLens.show();}
self.isLensActive=true;}}
if(change=="hide"){if(self.isLensActive){if(self.options.lensFadeOut){self.zoomLens.stop(true,true).fadeOut(self.options.lensFadeOut);}
else{self.zoomLens.hide();}
self.isLensActive=false;}}},showHideTint:function(change){var self=this;if(change=="show"){if(!self.isTintActive){if(self.options.zoomTintFadeIn){self.zoomTint.css({opacity:self.options.tintOpacity}).animate().stop(true,true).fadeIn("slow");}
else{self.zoomTint.css({opacity:self.options.tintOpacity}).animate();self.zoomTint.show();}
self.isTintActive=true;}}
if(change=="hide"){if(self.isTintActive){if(self.options.zoomTintFadeOut){self.zoomTint.stop(true,true).fadeOut(self.options.zoomTintFadeOut);}
else{self.zoomTint.hide();}
self.isTintActive=false;}}},setLensPostition:function(e){},setWindowPostition:function(e){var self=this;if(!isNaN(self.options.zoomWindowPosition)){switch(self.options.zoomWindowPosition){case 1:self.windowOffsetTop=(self.options.zoomWindowOffety);self.windowOffsetLeft=(+self.nzWidth);break;case 2:if(self.options.zoomWindowHeight>self.nzHeight){self.windowOffsetTop=((self.options.zoomWindowHeight/2)-(self.nzHeight/2))*(-1);self.windowOffsetLeft=(self.nzWidth);}
else{}
break;case 3:self.windowOffsetTop=(self.nzHeight-self.zoomWindow.height()-(self.options.borderSize*2));self.windowOffsetLeft=(self.nzWidth);break;case 4:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.nzWidth);break;case 5:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.nzWidth-self.zoomWindow.width()-(self.options.borderSize*2));break;case 6:if(self.options.zoomWindowHeight>self.nzHeight){self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=((self.options.zoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1);}
else{}
break;case 7:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=0;break;case 8:self.windowOffsetTop=(self.nzHeight);self.windowOffsetLeft=(self.zoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 9:self.windowOffsetTop=(self.nzHeight-self.zoomWindow.height()-(self.options.borderSize*2));self.windowOffsetLeft=(self.zoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 10:if(self.options.zoomWindowHeight>self.nzHeight){self.windowOffsetTop=((self.options.zoomWindowHeight/2)-(self.nzHeight/2))*(-1);self.windowOffsetLeft=(self.zoomWindow.width()+(self.options.borderSize*2))*(-1);}
else{}
break;case 11:self.windowOffsetTop=(self.options.zoomWindowOffety);self.windowOffsetLeft=(self.zoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 12:self.windowOffsetTop=(self.zoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.zoomWindow.width()+(self.options.borderSize*2))*(-1);break;case 13:self.windowOffsetTop=(self.zoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(0);break;case 14:if(self.options.zoomWindowHeight>self.nzHeight){self.windowOffsetTop=(self.zoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=((self.options.zoomWindowWidth/2)-(self.nzWidth/2)+(self.options.borderSize*2))*(-1);}
else{}
break;case 15:self.windowOffsetTop=(self.zoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.nzWidth-self.zoomWindow.width()-(self.options.borderSize*2));break;case 16:self.windowOffsetTop=(self.zoomWindow.height()+(self.options.borderSize*2))*(-1);self.windowOffsetLeft=(self.nzWidth);break;default:self.windowOffsetTop=(self.options.zoomWindowOffety);self.windowOffsetLeft=(self.nzWidth);}}
else{self.externalContainer=$('#'+self.options.zoomWindowPosition);self.externalContainerWidth=self.externalContainer.width();self.externalContainerHeight=self.externalContainer.height();self.externalContainerOffset=self.externalContainer.offset();self.windowOffsetTop=self.externalContainerOffset.top;self.windowOffsetLeft=self.externalContainerOffset.left;}
self.isWindowSet=true;self.windowOffsetTop=self.windowOffsetTop+self.options.zoomWindowOffety;self.windowOffsetLeft=self.windowOffsetLeft+self.options.zoomWindowOffetx;self.zoomWindow.css({top:self.windowOffsetTop});self.zoomWindow.css({left:self.windowOffsetLeft});if(self.options.zoomType=="inner"){self.zoomWindow.css({top:0});self.zoomWindow.css({left:0});}
self.windowLeftPos=String(((e.pageX-self.nzOffset.left)*self.widthRatio-self.zoomWindow.width()/2)*(-1));self.windowTopPos=String(((e.pageY-self.nzOffset.top)*self.heightRatio-self.zoomWindow.height()/2)*(-1));if(self.Etoppos){self.windowTopPos=0;}
if(self.Eloppos){self.windowLeftPos=0;}
if(self.Eboppos){self.windowTopPos=(self.largeHeight/self.currentZoomLevel-self.zoomWindow.height())*(-1);}
if(self.Eroppos){self.windowLeftPos=((self.largeWidth/self.currentZoomLevel-self.zoomWindow.width())*(-1));}
if(self.fullheight){self.windowTopPos=0;}
if(self.fullwidth){self.windowLeftPos=0;}
if(self.options.zoomType=="window"||self.options.zoomType=="inner"){if(self.zoomLock==1){if(self.widthRatio<=1){self.windowLeftPos=0;}
if(self.heightRatio<=1){self.windowTopPos=0;}}
if(self.options.zoomType=="window"){if(self.largeHeight<self.options.zoomWindowHeight){self.windowTopPos=self.options.zoomWindowHeight/2-self.largeHeight/2;}
if(self.largeWidth<self.options.zoomWindowWidth){self.windowLeftPos=self.options.zoomWindowWidth/2-self.largeWidth/2;}}
if(self.options.easing){if(!self.xp){self.xp=0;}
if(!self.yp){self.yp=0;}
if(!self.loop){self.loop=setInterval(function(){self.xp+=(self.windowLeftPos-self.xp)/self.options.easingAmount;self.yp+=(self.windowTopPos-self.yp)/self.options.easingAmount;if(self.scrollingLock){clearInterval(self.loop);self.xp=self.windowLeftPos;self.yp=self.windowTopPos
self.xp=((e.pageX-self.nzOffset.left)*self.widthRatio-self.zoomWindow.width()/2)*(-1);self.yp=(((e.pageY-self.nzOffset.top)*self.heightRatio-self.zoomWindow.height()/2)*(-1));if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
else{if(self.options.zoomType!="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvalueheight+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
self.changeBgSize=false;}
self.zoomWindow.css({backgroundPosition:self.windowLeftPos+'px '+self.windowTopPos+'px'});self.scrollingLock=false;self.loop=false;}
else if(Math.round(Math.abs(self.xp-self.windowLeftPos)+Math.abs(self.yp-self.windowTopPos))<1){clearInterval(self.loop);self.zoomWindow.css({backgroundPosition:self.windowLeftPos+'px '+self.windowTopPos+'px'});self.loop=false;}
else{if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
else{if(self.options.zoomType!="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
self.changeBgSize=false;}
self.zoomWindow.css({backgroundPosition:self.xp+'px '+self.yp+'px'});}},16);}}
else{if(self.changeBgSize){if(self.nzHeight>self.nzWidth){if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
self.zoomWindow.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}
else{if(self.options.zoomType=="lens"){self.zoomLens.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
if((self.largeHeight/self.newvaluewidth)<self.options.zoomWindowHeight){self.zoomWindow.css({"background-size":self.largeWidth/self.newvaluewidth+'px '+self.largeHeight/self.newvaluewidth+'px'});}
else{self.zoomWindow.css({"background-size":self.largeWidth/self.newvalueheight+'px '+self.largeHeight/self.newvalueheight+'px'});}}
self.changeBgSize=false;}
self.zoomWindow.css({backgroundPosition:self.windowLeftPos+'px '+self.windowTopPos+'px'});}}},setTintPosition:function(e){var self=this;self.nzOffset=self.$elem.offset();self.tintpos=String(((e.pageX-self.nzOffset.left)-(self.zoomLens.width()/2))*(-1));self.tintposy=String(((e.pageY-self.nzOffset.top)-self.zoomLens.height()/2)*(-1));if(self.Etoppos){self.tintposy=0;}
if(self.Eloppos){self.tintpos=0;}
if(self.Eboppos){self.tintposy=(self.nzHeight-self.zoomLens.height()-(self.options.lensBorderSize*2))*(-1);}
if(self.Eroppos){self.tintpos=((self.nzWidth-self.zoomLens.width()-(self.options.lensBorderSize*2))*(-1));}
if(self.options.tint){if(self.fullheight){self.tintposy=0;}
if(self.fullwidth){self.tintpos=0;}
self.zoomTintImage.css({'left':self.tintpos+'px'});self.zoomTintImage.css({'top':self.tintposy+'px'});}},swaptheimage:function(smallimage,largeimage){var self=this;var newImg=new Image();if(self.options.loadingIcon){self.spinner=$('<div style="background: url(\''+self.options.loadingIcon+'\') no-repeat center;height:'+self.nzHeight+'px;width:'+self.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>');self.$elem.after(self.spinner);}
self.options.onImageSwap(self.$elem);newImg.onload=function(){self.largeWidth=newImg.width;self.largeHeight=newImg.height;self.zoomImage=largeimage;self.zoomWindow.css({"background-size":self.largeWidth+'px '+self.largeHeight+'px'});self.swapAction(smallimage,largeimage);return;}
newImg.src=largeimage;},swapAction:function(smallimage,largeimage){var self=this;var newImg2=new Image();newImg2.onload=function(){self.nzHeight=newImg2.height;self.nzWidth=newImg2.width;self.options.onImageSwapComplete(self.$elem);self.doneCallback();return;}
newImg2.src=smallimage;self.currentZoomLevel=self.options.zoomLevel;self.options.maxZoomLevel=false;if(self.options.zoomType=="lens"){self.zoomLens.css({backgroundImage:"url('"+largeimage+"')"});}
if(self.options.zoomType=="window"){self.zoomWindow.css({backgroundImage:"url('"+largeimage+"')"});}
if(self.options.zoomType=="inner"){self.zoomWindow.css({backgroundImage:"url('"+largeimage+"')"});}
self.currentImage=largeimage;if(self.options.imageCrossfade){var oldImg=self.$elem;var newImg=oldImg.clone();self.$elem.attr("src",smallimage)
self.$elem.after(newImg);newImg.stop(true).fadeOut(self.options.imageCrossfade,function(){$(this).remove();});self.$elem.width("auto").removeAttr("width");self.$elem.height("auto").removeAttr("height");oldImg.fadeIn(self.options.imageCrossfade);if(self.options.tint&&self.options.zoomType!="inner"){var oldImgTint=self.zoomTintImage;var newImgTint=oldImgTint.clone();self.zoomTintImage.attr("src",largeimage)
self.zoomTintImage.after(newImgTint);newImgTint.stop(true).fadeOut(self.options.imageCrossfade,function(){$(this).remove();});oldImgTint.fadeIn(self.options.imageCrossfade);self.zoomTint.css({height:self.$elem.height()});self.zoomTint.css({width:self.$elem.width()});}
self.zoomContainer.css("height",self.$elem.height());self.zoomContainer.css("width",self.$elem.width());if(self.options.zoomType=="inner"){if(!self.options.constrainType){self.zoomWrap.parent().css("height",self.$elem.height());self.zoomWrap.parent().css("width",self.$elem.width());self.zoomWindow.css("height",self.$elem.height());self.zoomWindow.css("width",self.$elem.width());}}
if(self.options.imageCrossfade){self.zoomWrap.css("height",self.$elem.height());self.zoomWrap.css("width",self.$elem.width());}}
else{self.$elem.attr("src",smallimage);if(self.options.tint){self.zoomTintImage.attr("src",largeimage);self.zoomTintImage.attr("height",self.$elem.height());self.zoomTintImage.css({height:self.$elem.height()});self.zoomTint.css({height:self.$elem.height()});}
self.zoomContainer.css("height",self.$elem.height());self.zoomContainer.css("width",self.$elem.width());if(self.options.imageCrossfade){self.zoomWrap.css("height",self.$elem.height());self.zoomWrap.css("width",self.$elem.width());}}
if(self.options.constrainType){if(self.options.constrainType=="height"){self.zoomContainer.css("height",self.options.constrainSize);self.zoomContainer.css("width","auto");if(self.options.imageCrossfade){self.zoomWrap.css("height",self.options.constrainSize);self.zoomWrap.css("width","auto");self.constwidth=self.zoomWrap.width();}
else{self.$elem.css("height",self.options.constrainSize);self.$elem.css("width","auto");self.constwidth=self.$elem.width();}
if(self.options.zoomType=="inner"){self.zoomWrap.parent().css("height",self.options.constrainSize);self.zoomWrap.parent().css("width",self.constwidth);self.zoomWindow.css("height",self.options.constrainSize);self.zoomWindow.css("width",self.constwidth);}
if(self.options.tint){self.tintContainer.css("height",self.options.constrainSize);self.tintContainer.css("width",self.constwidth);self.zoomTint.css("height",self.options.constrainSize);self.zoomTint.css("width",self.constwidth);self.zoomTintImage.css("height",self.options.constrainSize);self.zoomTintImage.css("width",self.constwidth);}}
if(self.options.constrainType=="width"){self.zoomContainer.css("height","auto");self.zoomContainer.css("width",self.options.constrainSize);if(self.options.imageCrossfade){self.zoomWrap.css("height","auto");self.zoomWrap.css("width",self.options.constrainSize);self.constheight=self.zoomWrap.height();}
else{self.$elem.css("height","auto");self.$elem.css("width",self.options.constrainSize);self.constheight=self.$elem.height();}
if(self.options.zoomType=="inner"){self.zoomWrap.parent().css("height",self.constheight);self.zoomWrap.parent().css("width",self.options.constrainSize);self.zoomWindow.css("height",self.constheight);self.zoomWindow.css("width",self.options.constrainSize);}
if(self.options.tint){self.tintContainer.css("height",self.constheight);self.tintContainer.css("width",self.options.constrainSize);self.zoomTint.css("height",self.constheight);self.zoomTint.css("width",self.options.constrainSize);self.zoomTintImage.css("height",self.constheight);self.zoomTintImage.css("width",self.options.constrainSize);}}}},doneCallback:function(){var self=this;if(self.options.loadingIcon){self.spinner.hide();}
self.nzOffset=self.$elem.offset();self.nzWidth=self.$elem.width();self.nzHeight=self.$elem.height();self.currentZoomLevel=self.options.zoomLevel;self.widthRatio=self.largeWidth/self.nzWidth;self.heightRatio=self.largeHeight/self.nzHeight;if(self.options.zoomType=="window"){if(self.nzHeight<self.options.zoomWindowWidth/self.widthRatio){lensHeight=self.nzHeight;}
else{lensHeight=String((self.options.zoomWindowHeight/self.heightRatio))}
if(self.options.zoomWindowWidth<self.options.zoomWindowWidth){lensWidth=self.nzWidth;}
else{lensWidth=(self.options.zoomWindowWidth/self.widthRatio);}
if(self.zoomLens){self.zoomLens.css('width',lensWidth);self.zoomLens.css('height',lensHeight);}}},getCurrentImage:function(){var self=this;return self.zoomImage;},getGalleryList:function(){var self=this;self.gallerylist=[];if(self.options.gallery){$('#'+self.options.gallery+' a').each(function(){var img_src='';if($(this).data("zoom-image")){img_src=$(this).data("zoom-image");}
else if($(this).data("image")){img_src=$(this).data("image");}
if(img_src==self.zoomImage){self.gallerylist.unshift({href:''+img_src+'',title:$(this).find('img').attr("title")});}
else{self.gallerylist.push({href:''+img_src+'',title:$(this).find('img').attr("title")});}});}
else{self.gallerylist.push({href:''+self.zoomImage+'',title:$(this).find('img').attr("title")});}
return self.gallerylist;},changeZoomLevel:function(value){var self=this;self.scrollingLock=true;self.newvalue=parseFloat(value).toFixed(2);newvalue=parseFloat(value).toFixed(2);maxheightnewvalue=self.largeHeight/((self.options.zoomWindowHeight/self.nzHeight)*self.nzHeight);maxwidthtnewvalue=self.largeWidth/((self.options.zoomWindowWidth/self.nzWidth)*self.nzWidth);if(self.options.zoomType!="inner")
{if(maxheightnewvalue<=newvalue){self.heightRatio=(self.largeHeight/maxheightnewvalue)/self.nzHeight;self.newvalueheight=maxheightnewvalue;self.fullheight=true;}
else{self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;self.newvalueheight=newvalue;self.fullheight=false;}
if(maxwidthtnewvalue<=newvalue){self.widthRatio=(self.largeWidth/maxwidthtnewvalue)/self.nzWidth;self.newvaluewidth=maxwidthtnewvalue;self.fullwidth=true;}
else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false;}
if(self.options.zoomType=="lens"){if(maxheightnewvalue<=newvalue){self.fullwidth=true;self.newvaluewidth=maxheightnewvalue;}else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false;}}}
if(self.options.zoomType=="inner")
{maxheightnewvalue=parseFloat(self.largeHeight/self.nzHeight).toFixed(2);maxwidthtnewvalue=parseFloat(self.largeWidth/self.nzWidth).toFixed(2);if(newvalue>maxheightnewvalue){newvalue=maxheightnewvalue;}
if(newvalue>maxwidthtnewvalue){newvalue=maxwidthtnewvalue;}
if(maxheightnewvalue<=newvalue){self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;if(newvalue>maxheightnewvalue){self.newvalueheight=maxheightnewvalue;}else{self.newvalueheight=newvalue;}
self.fullheight=true;}
else{self.heightRatio=(self.largeHeight/newvalue)/self.nzHeight;if(newvalue>maxheightnewvalue){self.newvalueheight=maxheightnewvalue;}else{self.newvalueheight=newvalue;}
self.fullheight=false;}
if(maxwidthtnewvalue<=newvalue){self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;if(newvalue>maxwidthtnewvalue){self.newvaluewidth=maxwidthtnewvalue;}else{self.newvaluewidth=newvalue;}
self.fullwidth=true;}
else{self.widthRatio=(self.largeWidth/newvalue)/self.nzWidth;self.newvaluewidth=newvalue;self.fullwidth=false;}}
scrcontinue=false;if(self.options.zoomType=="inner"){if(self.nzWidth>=self.nzHeight){if(self.newvaluewidth<=maxwidthtnewvalue){scrcontinue=true;}
else{scrcontinue=false;self.fullheight=true;self.fullwidth=true;}}
if(self.nzHeight>self.nzWidth){if(self.newvaluewidth<=maxwidthtnewvalue){scrcontinue=true;}
else{scrcontinue=false;self.fullheight=true;self.fullwidth=true;}}}
if(self.options.zoomType!="inner"){scrcontinue=true;}
if(scrcontinue){self.zoomLock=0;self.changeZoom=true;if(((self.options.zoomWindowHeight)/self.heightRatio)<=self.nzHeight){self.currentZoomLevel=self.newvalueheight;if(self.options.zoomType!="lens"&&self.options.zoomType!="inner"){self.changeBgSize=true;self.zoomLens.css({height:String((self.options.zoomWindowHeight)/self.heightRatio)+'px'})}
if(self.options.zoomType=="lens"||self.options.zoomType=="inner"){self.changeBgSize=true;}}
if((self.options.zoomWindowWidth/self.widthRatio)<=self.nzWidth){if(self.options.zoomType!="inner"){if(self.newvaluewidth>self.newvalueheight){self.currentZoomLevel=self.newvaluewidth;}}
if(self.options.zoomType!="lens"&&self.options.zoomType!="inner"){self.changeBgSize=true;self.zoomLens.css({width:String((self.options.zoomWindowWidth)/self.widthRatio)+'px'})}
if(self.options.zoomType=="lens"||self.options.zoomType=="inner"){self.changeBgSize=true;}}
if(self.options.zoomType=="inner"){self.changeBgSize=true;if(self.nzWidth>self.nzHeight){self.currentZoomLevel=self.newvaluewidth;}
if(self.nzHeight>self.nzWidth){self.currentZoomLevel=self.newvaluewidth;}}}
self.setPosition(self.currentLoc);},closeAll:function(){if(self.zoomWindow){self.zoomWindow.hide();}
if(self.zoomLens){self.zoomLens.hide();}
if(self.zoomTint){self.zoomTint.hide();}},changeState:function(value){var self=this;if(value=='enable'){self.options.zoomEnabled=true;}
if(value=='disable'){self.options.zoomEnabled=false;}}};$.fn.elevateZoom=function(options){return this.each(function(){var elevate=Object.create(ElevateZoom);elevate.init(options,this);$.data(this,'elevateZoom',elevate);});};$.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:true,preloading:1,zoomLevel:1,scrollZoom:false,scrollZoomIncrement:0.1,minZoomLevel:false,maxZoomLevel:false,easing:false,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:false,lensFadeOut:false,debug:false,zoomWindowFadeIn:false,zoomWindowFadeOut:false,zoomWindowAlwaysShow:false,zoomTintFadeIn:false,zoomTintFadeOut:false,borderSize:4,showLens:true,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:false,lensColour:"white",lensOpacity:0.4,lenszoom:false,tint:false,tintColour:"#333",tintOpacity:0.4,gallery:false,galleryActiveClass:"zoomGalleryActive",imageCrossfade:false,constrainType:false,constrainSize:false,loadingIcon:false,cursor:"default",responsive:true,onComplete:$.noop,onDestroy:function(){},onZoomedImageLoaded:function(){},onImageSwap:$.noop,onImageSwapComplete:$.noop};})(jQuery,window,document);IB.views.StickyRecentlyView=IB.views.BaseView.extend({template:_.template($("#AH_RecentlyViewedContentTmpl").html()),events:{'click .AH_PreviousPageBtn':'getPreviousProducts','click .AH_NextPageBtn':'getNextProducts',},serialize:function(){return{items:this.items,location:this.location};},initialize:function(){var self=this;self.getRecentlyViewed().then(function(res){self.items=res;if(self.items.length>0){$("#rvi").html("Recently Viewed Items ("+self.items.length+")")}
self.items=_.filter(_.groupBy(self.items,function(item,ndx){return parseInt(ndx/4);}),function(i){return _.isArray(i);});self.render();},function(err){console.log(err);});},afterRender:function(){var self=this;_.each(this.items,function(item,ndx){_.each(item,function(product,index){product.url=product.cat.slug+'-'+product.brand.slug+'-'+product.sku;product.price.offerPrice=product.price.offerPrice*product.moq;product.price.price=product.price.price*product.moq;new IB.views.RecentlyProductCardView({el:self.$('.AH_ProductCard_'+ndx+'_'+index),productDetail:product,isFooterCard:true,location:"recently_viewed"}).render();});});this.$('.AH_CarouselWidget').carousel({interval:false,wrap:false,});},getNextProducts:function(){this.$('.AH_CarouselWidget').carousel('next');},getPreviousProducts:function(){this.$('.AH_CarouselWidget').carousel('prev');},getRecentlyViewed:function(){var url="/getrecentproducts/";return $.ajax({url:url,type:"GET"})},});IB.views.RecentlyProductCardView=IB.views.BaseView.extend({template:_.template($("#AH_RecentlyProductCardTmpl").html()),events:{'click .AH_AddToCart':'addToCart','click .AH_AddToPurchaseBtn':'addToPurchaseList',},serialize:function(){return{type:this.type,product:this.productDetail,isFooterCard:this.isFooterCard,isProductWidget:this.isProductWidget,location:this.location}},addToCart:function(e){var sku=$(e.target).data("sku");var qty=$(e.target).data("qty");addToCart(sku,qty);if(IB.GA&&this.isFooterCard){ga("send","event","homePage_Sticky_"+this.location,"Click","Add_to_cart");}
if(IB.GA&&this.isProductWidget){ga("send","event","homePage_"+this.type,"Click","Add_to_cart");}},addToPurchaseList:function(e){var sku=$(e.target).data("sku");var qty=$(e.target).data("qty");listpagebuynow('',sku,qty);},afterRender:function(){lazyLoadImages();}});$(function(){IB.globals.views.stickyRecentlyView=new IB.views.StickyRecentlyView({el:"#recentlyViewedContent"})})