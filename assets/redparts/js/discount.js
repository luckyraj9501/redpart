_.extend(Backbone.Model.prototype,Backbone.Validation.mixin);IB.models.UserDetail=Backbone.Model.extend({validation:{phone:[{required:true,},{pattern:/^\d{10,12}$/,msg:'Invalid phone number'}],email:[{required:true},{pattern:'email',msg:"please enter a valid email id."}],}});IB.views.GuestUserDetailView=IB.views.BaseView.extend({events:{'click .AH_SubmitBtn':'saveDetail'},saveDetail:function(e){var validationObject={};_.each(this.$el.serializeArray(),function(objectValue){validationObject[objectValue.name]=objectValue.value;})
this.model.set(validationObject);var errors=this.model.validate();if(!_.isEmpty(errors)){e.preventDefault();_.each(validationObject,function(err,field){if(errors[field]){this.$('.AH_Error_'+field).text(errors[field]).removeClass('hide');}
else{this.$('.AH_Error_'+field).addClass('hide');}},this);return;}
else{callAddToCartApi(this.model.toJSON())}}});$(function(){new IB.views.GuestUserDetailView({el:'#AH_GuestUserDetail',model:new IB.models.UserDetail()});$('.AH_CloseGuestUserDetailPopup, .genOverlayBg').click(function(){$('.AH_GuestUserDetailPopup').addClass('hide');});$('.signIntext').click(function(){$('.AH_GuestUserDetailPopup').addClass('hide');var tmpl=$('#AH_LoginSignUpTmpl').html();$('body').append(tmpl);IB.globals.views.loginSignupView=new IB.views.LoginSignUpView({el:'#AH_LoginSignUpView',template:_.template($('#AH_LoginSignUpTmpl').html()),popupType:'login'}).render();});});